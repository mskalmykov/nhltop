CREATE DATABASE IF NOT EXISTS nhltop;
USE nhltop;

CREATE TABLE IF NOT EXISTS games (
  gamePk INT UNSIGNED NOT NULL PRIMARY KEY, 
  season INT UNSIGNED,
  gameType CHAR,
  gameDate DATE,
  team_away_id SMALLINT UNSIGNED,
  team_away_name NVARCHAR(255),
  team_away_score TINYINT UNSIGNED,
  team_home_id SMALLINT UNSIGNED,
  team_home_name NVARCHAR(255),
  team_home_score TINYINT UNSIGNED
);

CREATE TABLE IF NOT EXISTS players (
  gamePk INT UNSIGNED NOT NULL, 
  personId INT UNSIGNED NOT NULL,
  fullName NVARCHAR(255),
  birthDate DATE,
  birthCity NVARCHAR(50),
  birthCountry NVARCHAR(10),
  nationality NVARCHAR(10),
  jerseyNumber TINYINT UNSIGNED,
  positionName NVARCHAR(30),
  PRIMARY KEY(gamePk, personId),
  CONSTRAINT `fk_gamePk`
     FOREIGN KEY (gamePk) REFERENCES games (gamePk)
     ON DELETE CASCADE
     ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS goalieStats (
  gamePk INT UNSIGNED NOT NULL,
  personId INT UNSIGNED NOT NULL,
  timeOnIce NVARCHAR(10),
  assists SMALLINT,
  goals SMALLINT,
  pim SMALLINT,
  shots SMALLINT,
  saves SMALLINT,
  powerPlaySaves SMALLINT,
  shortHandedSaves SMALLINT,
  evenSaves SMALLINT,
  shortHandedShotsAgainst SMALLINT,
  evenShotsAgainst SMALLINT,
  powerPlayShotsAgainst SMALLINT,
  savePercentage DECIMAL(17,14),
  PRIMARY KEY(gamePk, personId),
  CONSTRAINT `fk_game_person_g`
     FOREIGN KEY (gamePk, personId) REFERENCES players (gamePk, personId)
     ON DELETE CASCADE
     ON UPDATE CASCADE
);


CREATE TABLE IF NOT EXISTS skaterStats (
  gamePk INT UNSIGNED NOT NULL,
  personId INT UNSIGNED NOT NULL,
  timeOnIce NVARCHAR(10),
  assists SMALLINT,
  goals SMALLINT,
  shots SMALLINT,
  hits SMALLINT,
  powerPlayGoals SMALLINT,
  powerPlayAssists SMALLINT,
  penaltyMinutes SMALLINT,
  faceOffWins SMALLINT,
  faceoffTaken SMALLINT,
  takeaways SMALLINT,
  giveaways SMALLINT,
  shortHandedGoals SMALLINT,
  shortHandedAssists SMALLINT,
  blocked SMALLINT,
  plusMinus SMALLINT,
  evenTimeOnIce NVARCHAR(10),
  powerPlayTimeOnIce NVARCHAR(10),
  shortHandedTimeOnIce NVARCHAR(10),
  PRIMARY KEY(gamePk, personId),
  CONSTRAINT `fk_game_person_s`
     FOREIGN KEY (gamePk, personId) REFERENCES players (gamePk, personId)
     ON DELETE CASCADE
     ON UPDATE CASCADE
);

CREATE USER nhltop IDENTIFIED BY PASSWORD '*3B1A14814C0EEB30CF938F544559EF9FBCCE7EBB';
GRANT ALL PRIVILEGES ON nhltop.* TO nhltop ;
FLUSH PRIVILEGES;


SELECT PASSWORD('teivee6A');
